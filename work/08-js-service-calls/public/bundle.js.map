{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://08-js-service-calls/./src/constants.js","webpack://08-js-service-calls/./src/fetchService.js","webpack://08-js-service-calls/./src/messages.js","webpack://08-js-service-calls/./src/render.js","webpack://08-js-service-calls/./src/services.js","webpack://08-js-service-calls/./src/state.js","webpack://08-js-service-calls/webpack/bootstrap","webpack://08-js-service-calls/webpack/runtime/define property getters","webpack://08-js-service-calls/webpack/runtime/hasOwnProperty shorthand","webpack://08-js-service-calls/webpack/runtime/make namespace object","webpack://08-js-service-calls/./src/main.js"],"sourcesContent":["export const PAGES = {\n  LOGIN: 'login',\n  WORD_VIEW: 'wordView',\n};","export function fetchService(url, options = {}) {\n  return fetch(url, options)\n    .catch(() => Promise.reject({ error: 'network-error' }))\n    .then((response) => {\n      if (!response.ok) {\n        return response.json().then((err) => Promise.reject(err));\n      }\n      return response.json();\n    });\n}","export const MESSAGES = {\n    'network-error': 'Server is unavailable. Please try again later.',\n    'auth-missing': 'You need to be logged in to perform this action.',\n    'auth-insufficient': 'Invalid username.',\n    'required-username': 'Username is required and must be alphanumeric.',\n    'required-word': 'Word is required.',\n    'invalid-word': 'Word contains invalid characters.',\n    default: 'An unexpected error occurred. Please try again.',\n};\n  ","import { PAGES } from './constants';\n\nexport default function render(state, rootEl) {\n  const { page } = state;\n\n  if (page === PAGES.LOGIN) {\n    renderLoginView(state, rootEl);\n  } else if (page === PAGES.WORD_VIEW) {\n    renderWordView(state, rootEl);\n  }\n}\n\nfunction renderLoginView(state, rootEl) {\n  const { error } = state;\n\n  const html = `\n    ${error ? `<div class=\"error\">${error}</div>` : ''}\n    <form class=\"form\" id=\"login-form\">\n      <label class=\"label\" for=\"username\">Enter Username:</label>\n      <input class=\"input\" type=\"text\" name=\"username\" id=\"username\" required />\n      <button class=\"button\" type=\"submit\">Login</button>\n    </form>\n  `;\n\n  rootEl.innerHTML = html;\n}\n\nfunction renderWordView(state, rootEl) {\n  const { username, storedWord, error } = state;\n\n  const html = `\n    <div class=\"nav\">\n      <span>Welcome, ${username}</span>\n      <button class=\"button\" id=\"logout-btn\">Logout</button>\n    </div>\n    ${error ? `<div class=\"error\">${error}</div>` : ''}\n    <div class=\"content\">\n      <form class=\"form\" id=\"word-form\">\n        <label class=\"label\" for=\"word\">Your Stored Word:</label>\n        <input class=\"input\" type=\"text\" name=\"word\" id=\"word\" value=\"${storedWord}\" />\n        <button class=\"button\" type=\"submit\">Update Word</button>\n      </form>\n      ${storedWord ? `<p class=\"stored-word\">Your stored word is: <strong>${storedWord}</strong></p>` : ''}\n    </div>\n  `;\n\n  rootEl.innerHTML = html;\n}\n","import { fetchService } from './fetchService';\n\nexport function fetchSession() {\n  return fetchService('/api/session');\n}\n\nexport function loginUser(username) {\n  return fetchService('/api/session', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ username }),\n  });\n}\n\nexport function logoutUser() {\n  return fetchService('/api/session', {\n    method: 'DELETE',\n  });\n}\n\nexport function fetchStoredWord() {\n  return fetchService('/api/word');\n}\n\nexport function updateWord(word) {\n  return fetchService('/api/word', {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ word }),\n  });\n}\n\n","import { PAGES } from './constants';\n\nconst state = {\n  username: '',\n  storedWord: '',\n  error: '',\n  page: PAGES.LOGIN,\n};\n\nexport const updateUsername = (username) => {\n  state.username = username;\n};\n\nexport const updateStoredWord = (word) => {\n  state.storedWord = word;\n};\n\nexport const updateError = (error) => {\n  state.error = error;\n};\n\nexport const changePage = (page) => {\n  state.page = page;\n};\n\nexport const resetState = () => {\n  state.username = '';\n  state.storedWord = '';\n  state.error = '';\n  state.page = PAGES.LOGIN;\n};\n\nexport default state;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import state, {\n  updateUsername,\n  updateStoredWord,\n  updateError,\n  changePage,\n  resetState,\n} from './state';\nimport {\n  fetchSession,\n  loginUser,\n  logoutUser,\n  fetchStoredWord,\n  updateWord,\n} from './services';\nimport render from './render';\nimport { PAGES } from './constants';\nimport { MESSAGES } from './messages';\n  \nconst rootEl = document.querySelector('#app');\nrender(state, rootEl);\n  \nrootEl.addEventListener('click', (e) => {\n  if (e.target.id === 'logout-btn') {\n    handleLogout();\n    return;\n  }\n});\n  \nrootEl.addEventListener('submit', (e) => {\n  e.preventDefault();\n  \n  if (e.target.id === 'login-form') {\n    const username = e.target.elements['username'].value.trim();\n    handleLogin(username);\n    return;\n  }\n  \n  if (e.target.id === 'word-form') {\n    const word = e.target.elements['word'].value.trim();\n    handleUpdateStoredWord(word);\n    return;\n  }\n});\n  \nfunction handleLogin(username) {\n  loginUser(username)\n    .then((data) => {\n      updateUsername(data.username);\n      return handleFetchStoredWord();\n    })\n    .catch((err) => {\n      const errorMsg = MESSAGES[err.error] || MESSAGES.default;\n      updateError(errorMsg);\n      render(state, rootEl);\n    });\n}\n  \nfunction handleLogout() {\n  logoutUser()\n    .then(() => {\n      resetState();\n      changePage(PAGES.LOGIN);\n      render(state, rootEl);\n    })\n    .catch((err) => {\n      const errorMsg = MESSAGES[err.error] || MESSAGES.default;\n      updateError(errorMsg);\n      render(state, rootEl);\n    });\n}\n  \nfunction handleFetchStoredWord() {\n  return fetchStoredWord()\n    .then((data) => {\n      updateStoredWord(data.storedWord);\n      updateError('');\n      changePage(PAGES.WORD_VIEW);\n      render(state, rootEl);\n    })\n    .catch((err) => {\n      const errorMsg = MESSAGES[err.error] || MESSAGES.default;\n      updateError(errorMsg);\n      render(state, rootEl);\n    });\n}\n  \nfunction handleUpdateStoredWord(word) {\n  updateWord(word)\n    .then((data) => {\n      updateStoredWord(data.storedWord);\n      updateError('');\n      render(state, rootEl);\n    })\n    .catch((err) => {\n      const errorMsg = MESSAGES[err.error] || MESSAGES.default;\n      updateError(errorMsg);\n      render(state, rootEl);\n    });\n}\n  \nfunction checkForSession() {\n  fetchSession()\n    .then((data) => {\n      updateUsername(data.username);\n      return handleFetchStoredWord();\n    })\n    .catch(() => {\n      render(state, rootEl);\n    });\n}\n  \ncheckForSession();\n  "],"names":["PAGES","LOGIN","WORD_VIEW","fetchService","url","options","arguments","length","undefined","fetch","Promise","reject","error","then","response","ok","json","err","MESSAGES","render","state","rootEl","page","renderLoginView","renderWordView","html","concat","innerHTML","username","storedWord","fetchSession","loginUser","method","headers","body","JSON","stringify","logoutUser","fetchStoredWord","updateWord","word","updateUsername","updateStoredWord","updateError","changePage","resetState","document","querySelector","addEventListener","e","target","id","handleLogout","preventDefault","elements","value","trim","handleLogin","handleUpdateStoredWord","data","handleFetchStoredWord","errorMsg","checkForSession"],"sourceRoot":""}
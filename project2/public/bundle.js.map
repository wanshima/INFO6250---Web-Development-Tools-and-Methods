{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://project2/./src/constants.js","webpack://project2/./src/listeners.js","webpack://project2/./src/render.js","webpack://project2/./src/services.js","webpack://project2/./src/state.js","webpack://project2/webpack/bootstrap","webpack://project2/webpack/runtime/define property getters","webpack://project2/webpack/runtime/hasOwnProperty shorthand","webpack://project2/webpack/runtime/make namespace object","webpack://project2/./src/main.js"],"sourcesContent":["export const SERVER = {\n  AUTH_MISSING: 'auth-missing',\n  AUTH_INSUFFICIENT: 'auth-insufficient',\n  INVALID_USERNAME: 'invalid-username',\n  FORBIDDEN_USERNAME: 'forbidden-username',\n  EMPTY_MESSAGE: 'empty-message',\n};\n\nexport const CLIENT = {\n  NETWORK_ERROR: 'networkError',\n  NO_SESSION: 'noSession',\n};\n\nexport const MESSAGES = {\n  [CLIENT.NETWORK_ERROR]: 'Trouble connecting to the network. Please try again.',\n  [SERVER.AUTH_MISSING]: 'You must be logged in to perform this action.',\n  [SERVER.AUTH_INSUFFICIENT]: 'Your username is not permitted.',\n  [SERVER.INVALID_USERNAME]: 'Please enter a valid username (letters and/or numbers).',\n  [SERVER.FORBIDDEN_USERNAME]: 'This username is not allowed.',\n  [SERVER.EMPTY_MESSAGE]: 'Cannot send an empty message.',\n  default: 'Something went wrong. Please try again.',\n};\n","import {\n  fetchLogin,\n  fetchLogout,\n  fetchMessages,\n  fetchUsers,\n  sendMessage,\n} from './services';\n\nimport {\n  waitOnLogin,\n  login,\n  logout,\n  setMessages,\n  setUsers,\n  setError,\n  state,\n} from './state';\n\nimport { renderApp, renderMessagesAndUsers } from './render';\n\nexport function addEventListeners({ state, appEl }) {\n  appEl.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n    if (e.target.classList.contains('login__form')) {\n      const username = e.target.elements['username'].value.trim();\n      waitOnLogin();\n      renderApp({ state, appEl });\n      fetchLogin(username)\n        .then(() => {\n          login(username);\n          renderApp({ state, appEl });\n          startPolling({ state, appEl });\n        })\n        .catch((err) => {\n          setError(err.error);\n          renderApp({ state, appEl });\n          });\n    }\n    \n    if (e.target.classList.contains('message-form')) {\n      const text = e.target.elements['message'].value.trim();\n      sendMessage(text)\n        .then(() => {\n          e.target.reset();\n          return fetchMessages(state.lastMessageId);\n        })\n        .then((newMessages) => {\n          setMessages(newMessages);\n          renderMessagesAndUsers(state);\n        })\n        .catch((err) => {\n          setError(err.error);\n          renderApp({ state, appEl });\n        });\n      }\n    });\n\n    appEl.addEventListener('click', (e) => {\n      if (e.target.classList.contains('controls__logout-button')) {\n        logout();\n        renderApp({ state, appEl });\n        fetchLogout().catch((err) => {\n          setError(err.error);\n          renderApp({ state, appEl });\n        });\n      }\n    });\n    appEl.addEventListener('input', (e) => {\n      if (e.target.classList.contains('login__username')) {\n        state.username = e.target.value;\n      }\n    });\n}\n    \nexport function startPolling({ state, appEl }) {\n  function poll() {\n    if (!state.isLoggedIn) {\n      return; \n    }\n    Promise.all([fetchMessages(state.lastMessageId), fetchUsers()])\n      .then(([newMessages, users]) => {\n        setMessages(newMessages);\n        setUsers(users);\n        renderMessagesAndUsers(state);\n        setTimeout(poll, 5000);\n      })\n      .catch((err) => {\n        if (err.error === 'auth-missing') {\n          logout();\n          renderApp({ state, appEl });\n        } else {\n          setError(err.error);\n          setTimeout(poll, 5000);\n        }\n      });\n  }\n  poll();\n}\n  \n","function renderApp({ state, appEl }) {\n  const html = `\n    <main>\n      ${generateStatusHtml(state)}\n      ${generateLoginHtml(state)}\n      ${generateChatContainer(state)}\n    </main>\n  `;\n  appEl.innerHTML = html;\n\n  if (state.isLoggedIn) {\n    renderMessagesAndUsers(state);\n  }\n}\n\nfunction generateLoginHtml(state) {\n  if (state.isCheckingSession) {\n    return `\n      <div class=\"login__waiting\">Checking session...</div>\n    `;\n  }\n  if (state.isLoginPending) {\n    return `\n      <div class=\"login__waiting\">Loading user...</div>\n    `;\n  }\n  if (state.isLoggedIn) {\n    return ``;\n  }\n  const usernameValue = state.username || '';\n  return `\n    <div class=\"login\">\n      <form class=\"login__form\">\n        <label>\n          <span>Username:</span>\n          <input class=\"login__username\" name=\"username\" required value=\"${usernameValue}\">\n        </label>\n        <button type=\"submit\" class=\"login__button\">Login</button>\n      </form>\n    </div>\n  `;\n}\n\nfunction renderMessagesAndUsers(state) {\n  const usersContainer = document.querySelector('.users-list-container');\n  const messagesContainer = document.querySelector('.messages-container');\n\n  if (usersContainer) {\n    usersContainer.innerHTML = generateUsersHtml(state);\n  }\n\n  if (messagesContainer) {\n    messagesContainer.innerHTML = generateMessagesHtml(state);\n    scrollMessagesToBottom();\n  }\n}\n\nfunction generateStatusHtml(state) {\n  return `\n    <div class=\"status\">${state.error}</div>\n  `;\n}\n\nfunction generateChatContainer(state) {\n  if (!state.isLoggedIn) {\n    return ``;\n  }\n  return `\n    <div class=\"chat\">\n      ${generateControlsHtml()}\n      <div class=\"chat-content\">\n        <div class=\"users-list-container\">\n          <!-- Users will be rendered here -->\n        </div>\n        <div class=\"messages-container\">\n          <!-- Messages will be rendered here -->\n        </div>\n      </div>\n      ${generateMessageInputHtml()}\n    </div>\n  `;\n}\n\nfunction generateControlsHtml() {\n  return `\n    <div class=\"controls\">\n      <button class=\"controls__logout-button\">Logout</button>\n    </div>\n  `;\n}\n\nfunction generateUsersHtml(state) {\n  const usersHtml = state.users.map((user) => `<li>${user}</li>`).join('');\n  return `\n    <div class=\"users-list\">\n      <h3>Active Users</h3>\n      <ul>\n        ${usersHtml}\n      </ul>\n    </div>\n  `;\n}\n\nfunction generateMessagesHtml(state) {\n  if (state.isLoadingMessages) {\n    return `<div class=\"messages__waiting\">Loading messages...</div>`;\n  }\n  const messagesHtml = state.messages\n    .map(\n      (message) => `\n    <div class=\"message\">\n      <span class=\"username\">${message.username}:</span> ${message.text}\n    </div>\n  `\n    )\n    .join('');\n  return `\n    <div class=\"messages-list\">\n      ${messagesHtml}\n    </div>\n  `;\n}\n\nfunction generateMessageInputHtml() {\n  return `\n    <form class=\"message-form\">\n      <input class=\"message-input\" name=\"message\" placeholder=\"Type a message\" required>\n      <button type=\"submit\" class=\"message-form__button\">Send</button>\n    </form>\n  `;\n}\n\nfunction scrollMessagesToBottom() {\n  const messagesContainer = document.querySelector('.messages-container');\n  if (messagesContainer) {\n    messagesContainer.scrollTop = messagesContainer.scrollHeight;\n  }\n}\n\nexport { renderApp, renderMessagesAndUsers };\n","export function fetchSession() {\n  return fetch('/api/v1/session', {\n    method: 'GET',\n  })\n    .catch(() => Promise.reject({ error: 'networkError' }))\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n      return response\n        .json()\n        .catch((error) => Promise.reject({ error }))\n        .then((err) => Promise.reject(err));\n    });\n}\n\nexport function fetchLogin(username) {\n  return fetch('/api/v1/session', {\n    method: 'POST',\n    headers: new Headers({\n      'Content-Type': 'application/json',\n    }),\n    body: JSON.stringify({ username }),\n  })\n    .catch(() => Promise.reject({ error: 'networkError' }))\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n      return response\n        .json()\n        .catch((error) => Promise.reject({ error }))\n        .then((err) => Promise.reject(err));\n    });\n}\n\nexport function fetchLogout() {\n  return fetch('/api/v1/session', {\n    method: 'DELETE',\n  })\n    .catch(() => Promise.reject({ error: 'networkError' }))\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n      return response\n        .json()\n        .catch((error) => Promise.reject({ error }))\n        .then((err) => Promise.reject(err));\n    });\n}\n\nexport function fetchMessages(lastMessageId = 0) {\n    const params = new URLSearchParams({ lastMessageId });\n    return fetch(`/api/v1/messages?${params.toString()}`, {\n      method: 'GET',\n    })\n    .catch(() => Promise.reject({ error: 'networkError' }))\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n      return response.json()\n        .catch((error) => Promise.reject({ error }))\n        .then((err) => Promise.reject(err));\n    });\n}\n\nexport function sendMessage(text) {\n  return fetch('/api/v1/messages', {\n    method: 'POST',\n    headers: new Headers({\n      'Content-Type': 'application/json',\n    }),\n    body: JSON.stringify({ text }),\n  })\n    .catch(() => Promise.reject({ error: 'networkError' }))\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n      return response\n        .json()\n        .catch((error) => Promise.reject({ error }))\n        .then((err) => Promise.reject(err));\n    });\n}\n\nexport function fetchUsers() {\n  return fetch('/api/v1/users', {\n    method: 'GET',\n  })\n    .catch(() => Promise.reject({ error: 'networkError' }))\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n      return response\n        .json()\n        .catch((error) => Promise.reject({ error }))\n        .then((err) => Promise.reject(err));\n    });\n}\n","import { MESSAGES } from './constants';\n\nconst state = {\n    messages: [],\n    users: [],\n    isLoggedIn: false,\n    isLoginPending: false,\n    isCheckingSession: true, \n    username: '',\n    error: '',\n    isLoadingMessages: false,\n    lastMessageId: 0,\n  };\n\nexport function waitOnLogin() {\n  state.isLoggedIn = false;\n  state.isLoginPending = true;\n  state.username = '';\n  state.messages = [];\n  state.users = [];\n  state.error = '';\n  state.lastMessageId = 0;\n}\n\nexport function login(username) {\n  state.isLoggedIn = true;\n  state.isLoginPending = false;\n  state.username = username;\n  state.error = '';\n}\n\nexport function logout() {\n  state.isLoggedIn = false;\n  state.isLoginPending = false;\n  state.username = '';\n  state.messages = [];\n  state.users = [];\n  state.error = '';\n  state.lastMessageId = 0;\n}\n\nexport function waitOnMessages() {\n  state.isLoadingMessages = true;\n  state.error = '';\n}\n\nexport function setMessages(newMessages) {\n  if (Array.isArray(newMessages) && newMessages.length > 0) {\n      state.messages = [...state.messages, ...newMessages];\n      const latestMessage = newMessages[newMessages.length - 1];\n      state.lastMessageId = latestMessage.id;\n  }\n  state.isLoadingMessages = false;\n  state.error = '';\n}\n\nexport function setUsers(users) {\n  state.users = users;\n  state.error = '';\n}\n\nexport function addMessage(message) {\n  state.messages.push(message);\n  state.error = '';\n}\n\nexport function setError(error) {\n  if (!error) {\n    state.error = '';\n    return;\n  }\n  state.isLoginPending = false;\n  state.error = MESSAGES[error] || MESSAGES.default;\n}\n\nexport default state;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import state from './state';\nimport { renderApp, renderMessagesAndUsers } from './render';\nimport { addEventListeners, startPolling } from './listeners';\nimport { fetchSession, fetchMessages, fetchUsers } from './services';\nimport { login, logout, setMessages, setUsers, setError } from './state';\n\nconst appEl = document.getElementById('app');\n\nrenderApp({ state, appEl });\naddEventListeners({ state, appEl });\n\nfunction checkForSession() {\n  fetchSession()\n    .then((session) => {\n      state.isCheckingSession = false; \n      login(session.username);\n      renderApp({ state, appEl });\n      state.lastMessageId = session.latestMessageId;\n      return Promise.all([fetchMessages(state.lastMessageId), fetchUsers()]);\n    })\n    .then(([newMessages, users]) => {\n      setMessages(newMessages);\n      setUsers(users);\n      renderMessagesAndUsers(state);\n      startPolling({ state, appEl });\n    })\n    .catch((err) => {\n      state.isCheckingSession = false; \n      logout();\n      if (err.error !== 'auth-missing') {\n        setError(err.error || 'networkError');\n      }\n      renderApp({ state, appEl });\n    });\n}\n\ncheckForSession();\n"],"names":["SERVER","AUTH_MISSING","AUTH_INSUFFICIENT","INVALID_USERNAME","FORBIDDEN_USERNAME","EMPTY_MESSAGE","CLIENT","NETWORK_ERROR","NO_SESSION","MESSAGES","_defineProperty","fetchLogin","fetchLogout","fetchMessages","fetchUsers","sendMessage","waitOnLogin","login","logout","setMessages","setUsers","setError","state","renderApp","renderMessagesAndUsers","addEventListeners","_ref","appEl","addEventListener","e","preventDefault","target","classList","contains","username","elements","value","trim","then","startPolling","err","error","text","reset","lastMessageId","newMessages","_ref2","poll","isLoggedIn","Promise","all","_ref3","_ref4","_slicedToArray","users","setTimeout","html","concat","generateStatusHtml","generateLoginHtml","generateChatContainer","innerHTML","isCheckingSession","isLoginPending","usernameValue","usersContainer","document","querySelector","messagesContainer","generateUsersHtml","generateMessagesHtml","scrollMessagesToBottom","generateControlsHtml","generateMessageInputHtml","usersHtml","map","user","join","isLoadingMessages","messagesHtml","messages","message","scrollTop","scrollHeight","fetchSession","fetch","method","reject","response","ok","json","headers","Headers","body","JSON","stringify","arguments","length","undefined","params","URLSearchParams","toString","waitOnMessages","Array","isArray","_toConsumableArray","latestMessage","id","addMessage","push","getElementById","checkForSession","session","latestMessageId"],"sourceRoot":""}